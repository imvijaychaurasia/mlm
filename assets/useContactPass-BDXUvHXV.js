import{l as o,j as i,V as P,r as f}from"./index-OIlrF6ts.js";import{i as g,C as r,b as h}from"./pricing-DJQb7-pI.js";const S=o(i.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"})),d=o(i.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"})),A=()=>{const{user:e,setUser:l}=P(),[m,n]=f.useState(!1),u=g(e==null?void 0:e.entitlements),p=async()=>{if(!e)return!1;n(!0);try{await new Promise(a=>setTimeout(a,1500));const t=new Date;t.setDate(t.getDate()+r);const s={...e,entitlements:{...e.entitlements,contactPassUntil:t.toISOString()}};return l(s),!0}catch(t){return console.error("Contact pass purchase failed:",t),!1}finally{n(!1)}},c=()=>{var t;return(t=e==null?void 0:e.entitlements)!=null&&t.contactPassUntil?new Date(e.entitlements.contactPassUntil):null};return{hasActivePass:u,loading:m,purchaseContactPass:p,getPassExpiryDate:c,getDaysRemaining:()=>{const t=c();if(!t)return 0;const s=new Date,a=t.getTime()-s.getTime();return Math.max(0,Math.ceil(a/(1e3*60*60*24)))},price:h,duration:r}};export{S as E,d as P,A as u};
