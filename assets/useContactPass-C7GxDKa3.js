import{l as r,j as o,V as g,r as P}from"./index-efdPUol4.js";import{g as f,i as h}from"./pricing-CnH_CcUh.js";const y=r(o.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"})),w=r(o.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"})),S=()=>{const{user:e,setUser:l}=g(),[u,c]=P.useState(!1),s=f(),m=h(e==null?void 0:e.entitlements),p=async()=>{if(!e)return!1;c(!0);try{await new Promise(a=>setTimeout(a,1500));const t=new Date;t.setDate(t.getDate()+s.contactPassDuration);const n={...e,entitlements:{...e.entitlements,contactPassUntil:t.toISOString()}};return l(n),!0}catch(t){return console.error("Contact pass purchase failed:",t),!1}finally{c(!1)}},i=()=>{var t;return(t=e==null?void 0:e.entitlements)!=null&&t.contactPassUntil?new Date(e.entitlements.contactPassUntil):null};return{hasActivePass:m,loading:u,purchaseContactPass:p,getPassExpiryDate:i,getDaysRemaining:()=>{const t=i();if(!t)return 0;const n=new Date,a=t.getTime()-n.getTime();return Math.max(0,Math.ceil(a/(1e3*60*60*24)))},price:s.contactPassPrice,duration:s.contactPassDuration}};export{y as E,w as P,S as u};
