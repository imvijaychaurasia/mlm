import{K as B,W as V,X as q,r as n,O as v,j as e,Y as z,P as O,L as d,T as t,Z as R,_ as $,N as S,$ as P,a0 as D,a1 as F,a2 as A}from"./index-C6GUv-sR.js";import{u as N,C,o as U,c as H,a as L}from"./index.esm-I9PFDQqp.js";import{T as W}from"./TextField-Cq6ATHaf.js";import{I as K}from"./InputAdornment-Bjp0fACK.js";import{V as M,G as X,L as Y}from"./VisibilityOff-0c_pt8A0.js";import{V as Z}from"./Visibility-B_2DgsVW.js";const _=H().shape({email:L().email("Invalid email").required("Email is required"),password:L().min(6,"Password must be at least 6 characters").required("Password is required")}),ae=()=>{var b,y;const c=B(),k=V(),{setUser:m,setToken:u}=q(),[i,E]=n.useState(!1),[x,a]=n.useState(null),[h,p]=n.useState(!1),[l,g]=n.useState(!1),f=((y=(b=k.state)==null?void 0:b.from)==null?void 0:y.pathname)||v.HOME,{control:j,handleSubmit:G,formState:{errors:o}}=N({resolver:U(_),defaultValues:{email:"",password:""}}),I=async r=>{p(!0),a(null);try{const w=await A().login(r);m(w.user),u(w.token),c(f,{replace:!0})}catch(s){a(s.message||"Login failed. Please try again.")}finally{p(!1)}},T=async()=>{g(!0),a(null);try{const s=await A().loginWithGoogle();m(s.user),u(s.token),c(f,{replace:!0})}catch(r){a(r.message||"Google login failed. Please try again.")}finally{g(!1)}};return e.jsx(z,{maxWidth:"sm",sx:{mt:4,mb:4},children:e.jsxs(O,{elevation:3,sx:{p:4,borderRadius:3},children:[e.jsxs(d,{textAlign:"center",mb:4,children:[e.jsx(t,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Welcome Back"}),e.jsx(t,{variant:"body1",color:"text.secondary",children:"Sign in to your account to continue"})]}),x&&e.jsx(R,{severity:"error",sx:{mb:3},children:x}),e.jsxs("form",{onSubmit:G(I),children:[e.jsx(C,{name:"email",control:j,render:({field:r})=>{var s;return e.jsx(W,{...r,fullWidth:!0,label:"Email Address",type:"email",margin:"normal",error:!!o.email,helperText:(s=o.email)==null?void 0:s.message,autoComplete:"email",autoFocus:!0})}}),e.jsx(C,{name:"password",control:j,render:({field:r})=>{var s;return e.jsx(W,{...r,fullWidth:!0,label:"Password",type:i?"text":"password",margin:"normal",error:!!o.password,helperText:(s=o.password)==null?void 0:s.message,autoComplete:"current-password",InputProps:{endAdornment:e.jsx(K,{position:"end",children:e.jsx($,{onClick:()=>E(!i),edge:"end",children:i?e.jsx(M,{}):e.jsx(Z,{})})})}})}}),e.jsx(S,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:h,sx:{mt:3,mb:2,py:1.5},children:h?e.jsx(P,{size:24}):"Sign In"})]}),e.jsx(D,{sx:{my:3},children:e.jsx(t,{variant:"body2",color:"text.secondary",children:"or"})}),e.jsx(S,{fullWidth:!0,variant:"outlined",size:"large",startIcon:l?e.jsx(P,{size:20}):e.jsx(X,{}),onClick:T,disabled:l,sx:{mb:3,py:1.5},children:l?"Signing in...":"Continue with Google"}),e.jsx(d,{textAlign:"center",children:e.jsxs(t,{variant:"body2",color:"text.secondary",children:["Don't have an account?"," ",e.jsx(Y,{component:F,to:v.SIGNUP,underline:"hover",children:"Sign up here"})]})}),e.jsxs(d,{sx:{mt:3,p:2,bgcolor:"info.light",borderRadius:1,border:"1px solid",borderColor:"info.main"},children:[e.jsx(t,{variant:"body2",sx:{mb:1,fontWeight:"bold"},children:"Demo Credentials:"}),e.jsxs(t,{variant:"body2",children:["Email: admin@meramarket.com",e.jsx("br",{}),"Password: password123"]})]})]})})};export{ae as default};
