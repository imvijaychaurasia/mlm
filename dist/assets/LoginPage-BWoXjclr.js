import{I as V,U as B,V as q,r as n,L as v,j as e,P as z,W as R,J as d,T as a,X as U,Y as $,K as S,Z as P,_ as D,$ as F,a0 as A}from"./index-efdPUol4.js";import{u as M,C,o as O,c as N,a as L}from"./index.esm-FjIXLdVb.js";import{C as H}from"./Container-DUS3ebvr.js";import{T as W}from"./TextField-Gd7NDxyP.js";import{I as J}from"./InputAdornment-B8EasBBu.js";import{V as K,G as X,L as Y}from"./VisibilityOff-BQk-I_m2.js";import{V as Z}from"./Visibility-C8aJTt8l.js";const _=N().shape({email:L().email("Invalid email").required("Email is required"),password:L().min(6,"Password must be at least 6 characters").required("Password is required")}),ne=()=>{var b,y;const c=V(),k=B(),{setUser:m,setToken:u}=q(),[i,I]=n.useState(!1),[h,t]=n.useState(null),[x,p]=n.useState(!1),[l,g]=n.useState(!1),f=((y=(b=k.state)==null?void 0:b.from)==null?void 0:y.pathname)||v.HOME,{control:j,handleSubmit:E,formState:{errors:o}}=M({resolver:O(_),defaultValues:{email:"",password:""}}),G=async r=>{p(!0),t(null);try{const w=await A().login(r);m(w.user),u(w.token),c(f,{replace:!0})}catch(s){t(s.message||"Login failed. Please try again.")}finally{p(!1)}},T=async()=>{g(!0),t(null);try{const s=await A().loginWithGoogle();m(s.user),u(s.token),c(f,{replace:!0})}catch(r){t(r.message||"Google login failed. Please try again.")}finally{g(!1)}};return e.jsx(H,{maxWidth:"sm",sx:{mt:4,mb:4},children:e.jsxs(z,{elevation:3,sx:{p:4,borderRadius:3},children:[e.jsxs(d,{textAlign:"center",mb:4,children:[e.jsx(a,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Welcome Back"}),e.jsx(a,{variant:"body1",color:"text.secondary",children:"Sign in to your account to continue"})]}),h&&e.jsx(U,{severity:"error",sx:{mb:3},children:h}),e.jsxs("form",{onSubmit:E(G),children:[e.jsx(C,{name:"email",control:j,render:({field:r})=>{var s;return e.jsx(W,{...r,fullWidth:!0,label:"Email Address",type:"email",margin:"normal",error:!!o.email,helperText:(s=o.email)==null?void 0:s.message,autoComplete:"email",autoFocus:!0})}}),e.jsx(C,{name:"password",control:j,render:({field:r})=>{var s;return e.jsx(W,{...r,fullWidth:!0,label:"Password",type:i?"text":"password",margin:"normal",error:!!o.password,helperText:(s=o.password)==null?void 0:s.message,autoComplete:"current-password",InputProps:{endAdornment:e.jsx(J,{position:"end",children:e.jsx($,{onClick:()=>I(!i),edge:"end",children:i?e.jsx(K,{}):e.jsx(Z,{})})})}})}}),e.jsx(S,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:x,sx:{mt:3,mb:2,py:1.5},children:x?e.jsx(P,{size:24}):"Sign In"})]}),e.jsx(D,{sx:{my:3},children:e.jsx(a,{variant:"body2",color:"text.secondary",children:"or"})}),e.jsx(S,{fullWidth:!0,variant:"outlined",size:"large",startIcon:l?e.jsx(P,{size:20}):e.jsx(X,{}),onClick:T,disabled:l,sx:{mb:3,py:1.5},children:l?"Signing in...":"Continue with Google"}),e.jsx(d,{textAlign:"center",children:e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Don't have an account?"," ",e.jsx(Y,{component:F,to:v.SIGNUP,underline:"hover",children:"Sign up here"})]})}),R()&&e.jsxs(d,{sx:{mt:3,p:2,bgcolor:"info.light",borderRadius:1,border:"1px solid",borderColor:"info.main"},children:[e.jsx(a,{variant:"body2",sx:{mb:1,fontWeight:"bold"},children:"Demo Credentials:"}),e.jsxs(a,{variant:"body2",children:["Email: imvijaychaurasia@gmail.com",e.jsx("br",{}),"Password: password123"]})]})]})})};export{ne as default};
